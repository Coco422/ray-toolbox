import{d as b,q as p,E as y,ah as w,ai as l,al as u,am as r,an as x,ak as _,at as v,au as I,as as h,av as k,aw as N}from"./index-2sIqW00y.js";class c extends Error{}c.prototype.name="InvalidTokenError";function J(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,a)=>{let t=a.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}function T(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return J(e)}catch{return atob(e)}}function C(n,e){if(typeof n!="string")throw new c("Invalid token specified: must be a string");e||(e={});const a=e.header===!0?0:1,t=n.split(".")[a];if(typeof t!="string")throw new c(`Invalid token specified: missing part #${a+1}`);let o;try{o=T(t)}catch(d){throw new c(`Invalid token specified: invalid base64 for part #${a+1} (${d.message})`)}try{return JSON.parse(o)}catch(d){throw new c(`Invalid token specified: invalid json for part #${a+1} (${d.message})`)}}const E={class:"h-full flex flex-col gap-4"},U={key:0,class:"text-red-500 mt-2"},$=b({__name:"index",setup(n){const e=p(""),a=p(null),t=p(null),o=p(""),d=()=>{if(o.value="",a.value=null,t.value=null,!!e.value.trim())try{t.value=C(e.value);const f=e.value.split(".");if(f.length!==3)throw new Error("Invalid JWT format");a.value=JSON.parse(atob(f[0]))}catch{o.value="无效的 JWT Token"}},m=y(()=>a.value?JSON.stringify(a.value,null,2):""),g=y(()=>t.value?JSON.stringify(t.value,null,2):"");return(f,s)=>(x(),w("div",E,[l(r(h),{title:"JWT Token 输入"},{default:u(()=>[l(r(v),{value:e.value,"onUpdate:value":s[0]||(s[0]=i=>e.value=i),type:"textarea",placeholder:"Paste JWT here (eyJh...)",rows:3,onInput:d,class:"font-mono text-xs"},null,8,["value"]),o.value?(x(),w("div",U,I(o.value),1)):_("",!0)]),_:1}),l(r(N),{cols:2,"x-gap":12,class:"flex-1"},{default:u(()=>[l(r(k),null,{default:u(()=>[l(r(h),{title:"Header",class:"h-full"},{default:u(()=>[l(r(v),{value:m.value,"onUpdate:value":s[1]||(s[1]=i=>m.value=i),type:"textarea",readonly:"",class:"font-mono text-sm h-full bg-gray-50",placeholder:"Header..."},null,8,["value"])]),_:1})]),_:1}),l(r(k),null,{default:u(()=>[l(r(h),{title:"Payload",class:"h-full"},{default:u(()=>[l(r(v),{value:g.value,"onUpdate:value":s[2]||(s[2]=i=>g.value=i),type:"textarea",readonly:"",class:"font-mono text-sm h-full bg-gray-50",placeholder:"Payload..."},null,8,["value"])]),_:1})]),_:1})]),_:1})]))}});export{$ as default};
